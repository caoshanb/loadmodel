!function(F){var A={format:"YYYY-MM-DD",min:"1900-01-01 00:00:00",max:"2099-12-31 23:59:59",isv:false};var B={},E=document,G="createElement",D="getElementById",H="getElementsByTagName";var C=["laydate_box","laydate_void","laydate_click","LayDateSkin"];F.laydate=function(J){J=J||{};try{C.event=F.event?F.event:laydate.caller.arguments[0]}catch(I){}B.run(J);return laydate};laydate.v="1.1";B.trim=function(I){I=I||"";return I.replace(/^\s|\s$/g,"").replace(/\s+/g," ")};B.digit=function(I){return I<10?"0"+(I|0):I};B.stopmp=function(I){I=I||F.event;I.stopPropagation?I.stopPropagation():I.cancelBubble=true;return this};B.each=function(L,J){var I=0,K=L.length;for(;I<K;I++){if(J(I,L[I])===false){break}}};B.hasClass=function(J,I){J=J||{};return new RegExp("\\b"+I+"\\b").test(J.className)};B.addClass=function(J,I){J=J||{};B.hasClass(J,I)||(J.className+=" "+I);J.className=B.trim(J.className);return this};B.removeClass=function(J,I){J=J||{};if(B.hasClass(J,I)){var K=new RegExp("\\b"+I+"\\b");J.className=J.className.replace(K,"")}return this};B.removeCssAttr=function(J,K){var I=J.style;if(I.removeProperty){I.removeProperty(K)}else{I.removeAttribute(K)}};B.shde=function(J,I){J.style.display=I?"none":"block"};B.query=function(L){if(L&&L.nodeType===1){if(L.tagName.toLowerCase()!=="input"){throw new Error("选择器elem错误")}return L}var L=(B.trim(L)).split(" "),M=E[D](L[0].substr(1)),N;if(!M){return}else{if(!L[1]){return M}else{if(/^\./.test(L[1])){var J,I=L[1].substr(1),K=new RegExp("\\b"+I+"\\b");N=[];J=E.getElementsByClassName?M.getElementsByClassName(I):M[H]("*");B.each(J,function(P,O){K.test(O.className)&&N.push(O)});return N[0]?N:""}else{N=M[H](L[1]);return N[0]?M[H](L[1]):""}}}};B.on=function(K,I,J){K.attachEvent?K.attachEvent("on"+I,function(){J.call(K,F.even)}):K.addEventListener(I,J,false);return B};B.stopMosup=function(I,J){if(I!=="mouseup"){B.on(J,"mouseup",function(K){B.stopmp(K)})}};B.run=function(L){var J=B.query,K,O,I=C.event,N;try{N=I.target||I.srcElement||{}}catch(M){N={}}K=L.elem?J(L.elem):N;if(I&&N.tagName){if(!K||K===B.elem){return}B.stopMosup(I.type,K);B.stopmp(I);B.view(K,L);B.reshow()}else{O=L.event||"click";B.each((K.length|0)>0?K:[K],function(Q,P){B.stopMosup(O,P);B.on(P,O,function(R){B.stopmp(R);if(P!==B.elem){B.view(P,L);B.reshow()}})})}};B.scroll=function(I){I=I?"scrollLeft":"scrollTop";return E.body[I]|E.documentElement[I]};B.winarea=function(I){return document.documentElement[I?"clientWidth":"clientHeight"]};B.isleap=function(I){return(I%4===0&&I%100!==0)||I%400===0};B.checkVoid=function(L,J,K){var I=[];L=L|0;J=J|0;K=K|0;if(L<B.mins[0]){I=["y"]}else{if(L>B.maxs[0]){I=["y",1]}else{if(L>=B.mins[0]&&L<=B.maxs[0]){if(L==B.mins[0]){if(J<B.mins[1]){I=["m"]}else{if(J==B.mins[1]){if(K<B.mins[2]){I=["d"]}}}}if(L==B.maxs[0]){if(J>B.maxs[1]){I=["m",1]}else{if(J==B.maxs[1]){if(K>B.maxs[2]){I=["d",1]}}}}}}}return I};B.timeVoid=function(I,J){if(B.ymd[1]+1==B.mins[1]&&B.ymd[2]==B.mins[2]){if(J===0&&(I<B.mins[3])){return 1}else{if(J===1&&I<B.mins[4]){return 1}else{if(J===2&&I<B.mins[5]){return 1}}}}else{if(B.ymd[1]+1==B.maxs[1]&&B.ymd[2]==B.maxs[2]){if(J===0&&I>B.maxs[3]){return 1}else{if(J===1&&I>B.maxs[4]){return 1}else{if(J===2&&I>B.maxs[5]){return 1}}}}}if(I>(J?59:23)){return 1}};B.check=function(){var K=B.options.format.replace(/YYYY|MM|DD|hh|mm|ss/g,"\\d+\\").replace(/\\$/g,"");var J=new RegExp(K),M=B.elem[C.elemv];var L=M.match(/\d+/g)||[],I=B.checkVoid(L[0],L[1],L[2]);if(M.replace(/\s/g,"")!==""){if(!J.test(M)){B.elem[C.elemv]="";B.msg("日期不符合格式，请重新选择。");return 1}else{if(I[0]){B.elem[C.elemv]="";B.msg("日期不在有效期内，请重新选择。");return 1}else{I.value=B.elem[C.elemv].match(J).join();L=I.value.match(/\d+/g);if(L[1]<1){L[1]=1;I.auto=1}else{if(L[1]>12){L[1]=12;I.auto=1}else{if(L[1].length<2){I.auto=1}}}if(L[2]<1){L[2]=1;I.auto=1}else{if(L[2]>B.months[(L[1]|0)-1]){L[2]=31;I.auto=1}else{if(L[2].length<2){I.auto=1}}}if(L.length>3){if(B.timeVoid(L[3],0)){I.auto=1}if(B.timeVoid(L[4],1)){I.auto=1}if(B.timeVoid(L[5],2)){I.auto=1}}if(I.auto){B.creation([L[0],L[1]|0,L[2]|0],1)}else{if(I.value!==B.elem[C.elemv]){B.elem[C.elemv]=I.value}}}}}};B.months=[31,null,31,30,31,30,31,31,30,31,30,31];B.viewDate=function(N,L,I){var J=B.query,O={},K=new Date();N<(B.mins[0]|0)&&(N=(B.mins[0]|0));N>(B.maxs[0]|0)&&(N=(B.maxs[0]|0));K.setFullYear(N,L,I);O.ymd=[K.getFullYear(),K.getMonth(),K.getDate()];B.months[1]=B.isleap(O.ymd[0])?29:28;K.setFullYear(O.ymd[0],O.ymd[1],1);O.FDay=K.getDay();O.PDay=B.months[L===0?11:L-1]-O.FDay+1;O.NDay=1;B.each(C.tds,function(M,Q){var S=O.ymd[0],P=O.ymd[1]+1,R;Q.className="";if(M<O.FDay){Q.innerHTML=R=M+O.PDay;B.addClass(Q,"laydate_nothis");P===1&&(S-=1);P=P===1?12:P-1}else{if(M>=O.FDay&&M<O.FDay+B.months[O.ymd[1]]){Q.innerHTML=R=M-O.FDay+1;if(M-O.FDay+1===O.ymd[2]){B.addClass(Q,C[2]);O.thisDay=Q}}else{Q.innerHTML=R=O.NDay++;B.addClass(Q,"laydate_nothis");P===12&&(S+=1);P=P===12?1:P+1}}if(B.checkVoid(S,P,R)[0]){B.addClass(Q,C[1])}B.options.festival&&B.festival(Q,P+"."+R);Q.setAttribute("y",S);Q.setAttribute("m",P);Q.setAttribute("d",R);S=P=R=null});B.valid=!B.hasClass(O.thisDay,C[1]);B.ymd=O.ymd;C.year.value=B.ymd[0]+"年";C.month.value=B.digit(B.ymd[1]+1)+"月";B.each(C.mms,function(M,Q){var P=B.checkVoid(B.ymd[0],(Q.getAttribute("m")|0)+1);if(P[0]==="y"||P[0]==="m"){B.addClass(Q,C[1])}else{B.removeClass(Q,C[1])}B.removeClass(Q,C[2]);P=null});B.addClass(C.mms[B.ymd[1]],C[2]);O.times=[B.inymd[3]|0||0,B.inymd[4]|0||0,B.inymd[5]|0||0];B.each(new Array(3),function(M){B.hmsin[M].value=B.digit(B.timeVoid(O.times[M],M)?B.mins[M+3]|0:O.times[M]|0)});B[B.valid?"removeClass":"addClass"](C.ok,C[1])};B.festival=function(J,I){var K;switch(I){case"1.1":K="元旦";break;case"3.8":K="妇女";break;case"4.5":K="清明";break;case"5.1":K="劳动";break;case"6.1":K="儿童";break;case"9.10":K="教师";break;case"10.1":K="国庆";break}K&&(J.innerHTML=K);K=null};B.viewYears=function(K){var I=B.query,J="";B.each(new Array(14),function(L){if(L===7){J+="<li "+(parseInt(C.year.value)===K?'class="'+C[2]+'"':"")+' y="'+K+'">'+K+"年</li>"}else{J+='<li y="'+(K-7+L)+'">'+(K-7+L)+"年</li>"}});I("#laydate_ys").innerHTML=J;B.each(I("#laydate_ys li"),function(L,M){if(B.checkVoid(M.getAttribute("y"))[0]==="y"){B.addClass(M,C[1])}else{B.on(M,"click",function(N){B.stopmp(N).reshow();B.viewDate(this.getAttribute("y")|0,B.ymd[1],B.ymd[2])})}})};B.initDate=function(){var K=B.query,L={},J=new Date();var I=B.elem[C.elemv].match(/\d+/g)||[];if(I.length<3){I=B.options.start.match(/\d+/g)||[];if(I.length<3){I=[J.getFullYear(),J.getMonth()+1,J.getDate()]}}B.inymd=I;B.viewDate(I[0],I[1]-1,I[2])};B.iswrite=function(){var I=B.query,J={time:I("#laydate_hms")};B.shde(J.time,!B.options.istime);B.shde(C.oclear,!("isclear" in B.options?B.options.isclear:1));B.shde(C.otoday,!("istoday" in B.options?B.options.istoday:1));B.shde(C.ok,!("issure" in B.options?B.options.issure:1))};B.orien=function(I,J){var K,L=B.elem.getBoundingClientRect();I.style.left=L.left+(J?0:B.scroll(1))+"px";if(L.bottom+I.offsetHeight/1.5<=B.winarea()){K=L.bottom-1}else{K=L.top>I.offsetHeight/1.5?L.top-I.offsetHeight+1:B.winarea()-I.offsetHeight}I.style.top=K+(J?0:B.scroll())+"px"};B.follow=function(I){if(B.options.fixed){I.style.position="fixed";B.orien(I,1)}else{I.style.position="absolute";B.orien(I)}};B.viewtb=(function(){var J,K=[],N=["日","一","二","三","四","五","六"];var L={},M=E[G]("table"),I=E[G]("thead");I.appendChild(E[G]("tr"));L.creath=function(O){var P=E[G]("th");P.innerHTML=N[O];I[H]("tr")[0].appendChild(P);P=null};B.each(new Array(6),function(O){K.push([]);J=M.insertRow(0);B.each(new Array(7),function(P){K[O][P]=0;O===0&&L.creath(P);J.insertCell(P)})});M.insertBefore(I,M.children[0]);M.id=M.className="laydate_table";J=K=null;return M.outerHTML.toLowerCase()}());B.view=function(K,J){var I=B.query,M,L={};J=J||K;B.elem=K;B.options=J;B.options.format||(B.options.format=A.format);B.options.start=B.options.start||"";B.mm=L.mm=[B.options.min||A.min,B.options.max||A.max];B.mins=L.mm[0].match(/\d+/g);B.maxs=L.mm[1].match(/\d+/g);C.elemv=/textarea|input/.test(B.elem.tagName.toLocaleLowerCase())?"value":"innerHTML";if(!B.box){M=E[G]("div");M.id=C[0];M.className=C[0];M.style.cssText="position: absolute;";M.setAttribute("name","laydate-v"+laydate.v);M.innerHTML=L.html='<div class="laydate_top"><div class="laydate_ym laydate_y" id="laydate_YY"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_y" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms"><a class="laydate_tab laydate_chtop"><cite></cite></a><ul id="laydate_ys"></ul><a class="laydate_tab laydate_chdown"><cite></cite></a></div></div><div class="laydate_ym laydate_m" id="laydate_MM"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_m" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms" id="laydate_ms">'+function(){var N="";B.each(new Array(12),function(O){N+='<span m="'+O+'">'+B.digit(O+1)+"月</span>"});return N}()+"</div></div></div>"+B.viewtb+'<div class="laydate_bottom"><ul id="laydate_hms"><li class="laydate_sj">时间</li><li><input readonly>:</li><li><input readonly>:</li><li><input readonly></li></ul><div class="laydate_time" id="laydate_time"></div><div class="laydate_btn"><a id="laydate_clear">清空</a><a id="laydate_today">今天</a><a id="laydate_ok">确认</a></div>'+(A.isv?'<a href="http://sentsin.com/layui/laydate/" class="laydate_v" target="_blank">laydate-v'+laydate.v+"</a>":"")+"</div>";E.body.appendChild(M);B.box=I("#"+C[0]);B.events();M=null}else{B.shde(B.box)}B.follow(B.box);J.zIndex?B.box.style.zIndex=J.zIndex:B.removeCssAttr(B.box,"z-index");B.stopMosup("click",B.box);B.initDate();B.iswrite();B.check()};B.reshow=function(){B.each(B.query("#"+C[0]+" .laydate_show"),function(I,J){B.removeClass(J,"laydate_show")});return this};B.close=function(){B.reshow();B.shde(B.query("#"+C[0]),1);B.elem=null};B.parse=function(J,I,K){J=J.concat(I);K=K||(B.options?B.options.format:A.format);return K.replace(/YYYY|MM|DD|hh|mm|ss/g,function(L,M){J.index=++J.index|0;return B.digit(J[J.index])})};B.creation=function(J,M){var K=B.query,I=B.hmsin;var L=B.parse(J,[I[0].value,I[1].value,I[2].value]);B.elem[C.elemv]=L;if(!M){B.close();typeof B.options.choose==="function"&&B.options.choose(L)}};B.events=function(){var I=B.query,J={box:"#"+C[0]};B.addClass(E.body,"laydate_body");C.tds=I("#laydate_table td");C.mms=I("#laydate_ms span");C.year=I("#laydate_y");C.month=I("#laydate_m");B.each(I(J.box+" .laydate_ym"),function(K,L){B.on(L,"click",function(M){B.stopmp(M).reshow();B.addClass(this[H]("div")[0],"laydate_show");if(!K){J.YY=parseInt(C.year.value);B.viewYears(J.YY)}})});B.on(I(J.box),"click",function(){B.reshow()});J.tabYear=function(K){if(K===0){B.ymd[0]--}else{if(K===1){B.ymd[0]++}else{if(K===2){J.YY-=14}else{J.YY+=14}}}if(K<2){B.viewDate(B.ymd[0],B.ymd[1],B.ymd[2]);B.reshow()}else{B.viewYears(J.YY)}};B.each(I("#laydate_YY .laydate_tab"),function(K,L){B.on(L,"click",function(M){B.stopmp(M);J.tabYear(K)})});J.tabMonth=function(K){if(K){B.ymd[1]++;if(B.ymd[1]===12){B.ymd[0]++;B.ymd[1]=0}}else{B.ymd[1]--;if(B.ymd[1]===-1){B.ymd[0]--;B.ymd[1]=11}}B.viewDate(B.ymd[0],B.ymd[1],B.ymd[2])};B.each(I("#laydate_MM .laydate_tab"),function(K,L){B.on(L,"click",function(M){B.stopmp(M).reshow();J.tabMonth(K)})});B.each(I("#laydate_ms span"),function(K,L){B.on(L,"click",function(M){B.stopmp(M).reshow();if(!B.hasClass(this,C[1])){B.viewDate(B.ymd[0],this.getAttribute("m")|0,B.ymd[2])}})});B.each(I("#laydate_table td"),function(K,L){B.on(L,"click",function(M){if(!B.hasClass(this,C[1])){B.stopmp(M);B.creation([this.getAttribute("y")|0,this.getAttribute("m")|0,this.getAttribute("d")|0])}})});C.oclear=I("#laydate_clear");B.on(C.oclear,"click",function(){B.elem[C.elemv]="";B.close()});C.otoday=I("#laydate_today");B.on(C.otoday,"click",function(){var K=new Date();B.creation([K.getFullYear(),K.getMonth()+1,K.getDate()])});C.ok=I("#laydate_ok");B.on(C.ok,"click",function(){if(B.valid){B.creation([B.ymd[0],B.ymd[1]+1,B.ymd[2]])}});J.times=I("#laydate_time");B.hmsin=J.hmsin=I("#laydate_hms input");J.hmss=["小时","分钟","秒数"];J.hmsarr=[];B.msg=function(K,M){var L='<div class="laydte_hsmtex">'+(M||"提示")+"<span>×</span></div>";if(typeof K==="string"){L+="<p>"+K+"</p>";B.shde(I("#"+C[0]));B.removeClass(J.times,"laydate_time1").addClass(J.times,"laydate_msg")}else{if(!J.hmsarr[K]){L+='<div id="laydate_hmsno" class="laydate_hmsno">';B.each(new Array(K===0?24:60),function(N){L+="<span>"+N+"</span>"});L+="</div>";J.hmsarr[K]=L}else{L=J.hmsarr[K]}B.removeClass(J.times,"laydate_msg");B[K===0?"removeClass":"addClass"](J.times,"laydate_time1")}B.addClass(J.times,"laydate_show");J.times.innerHTML=L};J.hmson=function(L,M){var K=I("#laydate_hmsno span"),N=B.valid?null:1;B.each(K,function(O,P){if(N){B.addClass(P,C[1])}else{if(B.timeVoid(O,M)){B.addClass(P,C[1])}else{B.on(P,"click",function(Q){if(!B.hasClass(this,C[1])){L.value=B.digit(this.innerHTML|0)}})}}});B.addClass(K[L.value|0],"laydate_click")};B.each(J.hmsin,function(K,L){B.on(L,"click",function(M){B.stopmp(M).reshow();B.msg(K,J.hmss[K]);J.hmson(this,K)})});B.on(E,"mouseup",function(){var K=I("#"+C[0]);if(K&&K.style.display!=="none"){B.check()||B.close()}}).on(E,"keydown",function(L){L=L||F.event;var K=L.keyCode;if(K===13&&B.elem){B.creation([B.ymd[0],B.ymd[1]+1,B.ymd[2]])}})};laydate.reset=function(){(B.box&&B.elem)&&B.follow(B.box)};laydate.now=function(I,J){var K=new Date((I|0)?function(L){return L<86400000?(+new Date+L*86400000):L}(parseInt(I)):+new Date);return B.parse([K.getFullYear(),K.getMonth()+1,K.getDate()],[K.getHours(),K.getMinutes(),K.getSeconds()],J)}}(window);